---
const departments = [
  { value: "", label: "Select a department" },
  { value: "general", label: "General Inquiries" },
  { value: "finance", label: "Finance Department" },
  { value: "infrastructure", label: "Infrastructure & Development" },
  { value: "health", label: "Health Department" },
  { value: "education", label: "Education Department" },
  { value: "environment", label: "Environmental Protection" },
  { value: "technology", label: "Technology & Innovation" }
];

const inquiryTypes = [
  { value: "", label: "Select inquiry type" },
  { value: "information", label: "Request Information" },
  { value: "service", label: "Service Inquiry" },
  { value: "complaint", label: "File a Complaint" },
  { value: "suggestion", label: "Provide Suggestion" },
  { value: "other", label: "Other" }
];
---

<div class="bg-white rounded-xl shadow-md overflow-hidden">
  <form id="contact-form" class="p-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- First Name -->
      <div>
        <label for="first-name" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
        <input 
          type="text" 
          id="first-name" 
          name="first-name" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
          required
        />
      </div>
      
      <!-- Last Name -->
      <div>
        <label for="last-name" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
        <input 
          type="text" 
          id="last-name" 
          name="last-name" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
          required
        />
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
          required
        />
      </div>
      
      <!-- Phone -->
      <div>
        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
        <input 
          type="tel" 
          id="phone" 
          name="phone" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
        />
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- Department -->
      <div>
        <label for="department" class="block text-sm font-medium text-gray-700 mb-1">Department</label>
        <select 
          id="department" 
          name="department" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
          required
        >
          {departments.map(dept => (
            <option value={dept.value}>{dept.label}</option>
          ))}
        </select>
      </div>
      
      <!-- Inquiry Type -->
      <div>
        <label for="inquiry-type" class="block text-sm font-medium text-gray-700 mb-1">Inquiry Type</label>
        <select 
          id="inquiry-type" 
          name="inquiry-type" 
          class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
          required
        >
          {inquiryTypes.map(type => (
            <option value={type.value}>{type.label}</option>
          ))}
        </select>
      </div>
    </div>
    
    <!-- Subject -->
    <div class="mb-6">
      <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
      <input 
        type="text" 
        id="subject" 
        name="subject" 
        class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
        required
      />
    </div>
    
    <!-- Message -->
    <div class="mb-6">
      <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message</label>
      <textarea 
        id="message" 
        name="message" 
        rows="6" 
        class="w-full rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
        required
      ></textarea>
    </div>
    
    <!-- File Upload -->
    <div class="mb-6">
      <label for="attachment" class="block text-sm font-medium text-gray-700 mb-1">Attachment (Optional)</label>
      <input 
        type="file" 
        id="attachment" 
        name="attachment" 
        class="w-full text-gray-700 rounded-md border-gray-300 border py-2 px-4 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50"
      />
      <p class="text-xs text-gray-500 mt-1">Max file size: 5MB. Supported formats: PDF, JPG, PNG</p>
    </div>
    
    <!-- Privacy Agreement -->
    <div class="mb-6">
      <label class="flex items-start">
        <input 
          type="checkbox" 
          name="privacy-agreement" 
          class="mt-1 rounded text-primary-600 focus:ring-primary-500"
          required
        />
        <span class="ml-2 text-sm text-gray-700">
          I agree to the <a href="/privacy" class="text-primary-600 hover:text-primary-700 underline">privacy policy</a> and consent to the processing of my personal data for the purpose of addressing my inquiry.
        </span>
      </label>
    </div>
    
    <!-- Submit Button -->
    <div class="text-right">
      <button 
        type="submit" 
        class="inline-flex justify-center items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200"
      >
        Send Message
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
        </svg>
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const contactForm = document.getElementById('contact-form');
    
    contactForm?.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // In a real implementation, you would send the form data to the server here
      
      // Simulate form submission
      const submitButton = contactForm.querySelector('button[type="submit"]');
      if (submitButton) {
        submitButton.disabled = true;
        submitButton.innerHTML = `
          <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Sending...
        `;
      }
      
      // Simulate a successful response after 2 seconds
      setTimeout(() => {
        // Create a success message
        const successMessage = document.createElement('div');
        successMessage.className = 'bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6';
        successMessage.innerHTML = `
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium">Thank you! Your message has been sent successfully. We'll respond within 2 business days.</p>
            </div>
          </div>
        `;
        
        // Insert the success message before the form
        contactForm.parentNode?.insertBefore(successMessage, contactForm);
        
        // Reset the form
        contactForm.reset();
        
        // Reset the button
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.innerHTML = `
            Send Message
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
            </svg>
          `;
        }
        
        // Remove the success message after 5 seconds
        setTimeout(() => {
          successMessage.remove();
        }, 5000);
      }, 2000);
    });
  });
</script>
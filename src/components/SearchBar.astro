---
---

<div class="relative">
  <button 
    id="search-button"
    class="p-2 rounded-md text-gray-500 hover:text-primary-600 transition-colors duration-200"
    aria-label="Search"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
  </button>
  
  <div id="search-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-start justify-center pt-16">
    <div class="bg-white w-full max-w-2xl rounded-lg shadow-xl p-4 m-4">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">Search Ciboston Government</h3>
        <button id="close-search" class="text-gray-400 hover:text-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <form action="/search" method="get" class="mb-4">
        <div class="relative rounded-md shadow-sm">
          <input
            type="text"
            name="q"
            id="search-input"
            class="block w-full rounded-md border-gray-300 border py-2 px-4 pr-10 focus:border-primary-500 focus:ring-primary-500"
            placeholder="Search for services, information, departments..."
            autocomplete="off"
          />
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </div>
        </div>
      </form>
      
      <div class="space-y-2">
        <p class="text-sm text-gray-500">Quick Links:</p>
        <div class="flex flex-wrap gap-2">
          <a href="/services" class="text-sm px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200">Services</a>
          <a href="/departments" class="text-sm px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200">Departments</a>
          <a href="/forms" class="text-sm px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200">Forms</a>
          <a href="/contact" class="text-sm px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200">Contact</a>
          <a href="/emergency" class="text-sm px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200">Emergency</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchButton = document.getElementById('search-button');
    const searchModal = document.getElementById('search-modal');
    const closeSearch = document.getElementById('close-search');
    const searchInput = document.getElementById('search-input');
    
    searchButton?.addEventListener('click', () => {
      searchModal?.classList.remove('hidden');
      // Focus the search input after a small delay to ensure the modal is visible
      setTimeout(() => {
        (searchInput as HTMLInputElement)?.focus();
      }, 100);
    });
    
    closeSearch?.addEventListener('click', () => {
      searchModal?.classList.add('hidden');
    });
    
    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !searchModal?.classList.contains('hidden')) {
        searchModal?.classList.add('hidden');
      }
    });
    
    // Close when clicking outside the modal content
    searchModal?.addEventListener('click', (e) => {
      if (e.target === searchModal) {
        searchModal.classList.add('hidden');
      }
    });
  });
</script>